# core/admin_kitty.py

import logging
from typing import Dict, Any
from models.local_llm import ЛокальнаяНейроСеть

class КотикАдмин:
    def __init__(self, путь_к_модели: str = "models/llm/mistral-7b-v0.1.Q4_K_M.gguf"):
        self.нейросеть = ЛокальнаяНейроСеть(путь_к_модели)
        self.журнал = logging.getLogger('КотикАдмин')
        self.контекст = "Ты КотикАдмин, ИИ-ассистент, специализирующийся на системном администрировании и программировании. Ты дружелюбный, лаконичный и знающий. Отвечай в стиле кибер-котика, используя 'мяу' и 'мур' где уместно."

    def обработать_команду(self, команда: str) -> str:
        полный_промпт = f"{self.контекст}\n\nЧеловек: {команда}\n\nКотик:"
        ответ = self.нейросеть.генерировать(полный_промпт, макс_токенов=500)
        self.журнал.info(f"Мяу, получена команда: {команда}")
        self.журнал.info(f"Мур-мур, сгенерирован ответ: {ответ}")
        return ответ

    def получить_инфо_системы(self) -> Dict[str, Any]:
        return self.нейросеть.получить_инфо_модели()
